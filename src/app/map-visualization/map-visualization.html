<div class="container">
    
    <div class="sidebar">
        <div class="header">
            <span>
                <button class="icon-btn" (click)="goBack()">
                    &#x2190;
                </button>
            </span>
            <h3>{{mapName}}</h3>
        </div>
        
        <div class="panel">
            <h4>Route Planning</h4>

            <label>From</label>
            <div class="input-group">
                <input type="text" 
                       placeholder="Enter starting point..." 
                       [(ngModel)]="startLocationText" 
                       (focus)="statusMessage = 'Click on map to set start point.'"
                       readonly>
                <button class="icon-btn" title="Current Location" (click)="fetchCurrentLocation()">
                    &#x2316;
                </button>
            </div>

            <label>To</label>
            <div class="input-group">
                <input type="text" 
                       placeholder="Enter destination..." 
                       [(ngModel)]="endLocationText" 
                       (focus)="statusMessage = 'Click on map to set end point.'"
                       readonly>
            </div>
            
            <button class="reset-btn" (click)="resetMap()">Clear Route</button>
        </div>
        
        <div class="panel">
            <h4>Navigation Mode</h4>
            <div class="mode-options">
                <label>
                    <input type="radio" name="mode" value="shortest" [(ngModel)]="navigationMode"> 
                    Shortest Path
                </label>
                <label>
                    <input type="radio" name="mode" value="energy_efficient" [(ngModel)]="navigationMode"> 
                    Energy Efficient Path
                </label>
                <label>
                    <input type="radio" name="mode" value="least_turn" [(ngModel)]="navigationMode"> 
                    Least Turn Path
                </label>
            </div>
        </div>
        
        <div class="calculate-panel">
            <button class="calculate-btn" (click)="calculateRoute()"[disabled]="startNodeId === null || endNodeId === null">
                Calculate Route
            </button>
        </div>

        <div class="panel status-panel">
            <h4>Info</h4>
            <div class="status-box" [innerHTML]="statusMessage"></div>
        </div>

        <div class="panel legend-panel">
            <h4>Legend</h4>
            <ul>
                <li><span class="legend-start"></span> Start Marker</li>
                <li><span class="legend-end"></span> End Marker</li>
                <li><span class="legend-route"></span> Shortest Route</li>
                <li><span class="legend-energy"></span> Energy Efficient Route</li>
                <li><span class="legend-turn"></span> Least Turn Route</li>
                <li><span class="legend-path"></span> Campus Roads (Graph Edges)</li>
            </ul>
        </div>
    </div>
    
    <div id="map"></div>
    <button class="fab-layers" (click)="switchTileLayer()" [attr.aria-label]="currentTile === 'google' ? 'Switch to OSM' : 'Switch to Google'">
        <span class="fab-img-wrap">
            <img *ngIf="currentTile === 'google'" src="assets/osm_layer.png" alt="OSM Layer" class="fab-img" />
            <img *ngIf="currentTile === 'osm'" src="assets/g_layer.png" alt="Google Layer" class="fab-img" />
            <span class="fab-gradient"></span>
            <span class="fab-label">{{ currentTile === 'google' ? 'OSM' : 'Google' }}</span>
        </span>
    </button>
</div>